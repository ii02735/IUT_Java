package état;

import java.util.Date;

import appli.Commande;
import appli.État;

public class Livrée implements État{

	@Override
	public void payer(Commande c) throws Exception {
		// TODO Auto-generated method stub
		throw new Exception("Une commande livrée ne peut être payée");
		
	}

	@Override
	public void rembourser(Commande c) throws Exception {
		// TODO Auto-generated method stub
		if(this.getDays(c.getDate(), new Date()) > 14)
		{
			c.setÉtat(new NonPayée());
		}
		else
		{
			throw new Exception("Le délai de remboursement a expiré");
		}
		
	}

	@Override
	public void livrer(Commande c) throws Exception {
		// TODO Auto-generated method stub
		
		throw new Exception("Une commande livrée ne peut l'être une seconde fois");
		
	}
	
	private long getDays(Date d1, Date d2) 
	{
		long diff = d1.getTime() - d2.getTime();
	    return diff/(24 * 60 * 60 * 1000);
	}

}
